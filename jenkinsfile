pipeline {
    agent any

    stages {
        stage('Checkout') {
            steps {
                git branch: 'main', url: 'https://github.com/Samiyyaaftab/Jenk.git'
            }
        }

        stage('Install Dependencies') {
            steps {
                bat "npm install"
            }
        }

        stage('Build') {
            steps {
                bat "npm run build --if-present"
            }
        }

        stage('Test') {
            steps {
                echo "No tests configured, skipping test stage..."
            }
        }

       stage('Docker Build & Push') {
    steps {
        withCredentials([usernamePassword(credentialsId: 'docker-cred', usernameVariable: 'DOCKER_USER', passwordVariable: 'DOCKER_PASS')]) {
            bat """
            echo %DOCKER_PASS% | docker login -u %DOCKER_USER% --password-stdin
            docker build -t samiyyaaftab/zesty .
            docker push samiyyaaftab/zesty
            """
        }
    }
}

        stage('Deploy to Railway') {
            steps {
                echo "Deploying to Railway... (handled automatically by Railway GitHub integration)"
            }
        }
    }
}
